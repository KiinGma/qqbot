import{r as C,T as Se,f as l,o as M,c as K,w as t,h as e,B as j,k as m,t as x,i as f,u as n,s as R,j as L,l as Z,a2 as Ne,a3 as Q,L as Ee,S as Ke,a4 as re,U as je,a5 as Oe,a6 as Fe,a7 as ze,b as Be,x as qe,a8 as Le,O as Re,e as Ie,a9 as Je,aa as We,X as He,ab as Qe,Q as X,R as G,F as Y,C as ue,y as Xe,P as ae,E as H,z as Ge,ac as Ye,m as Ze,v as et,a as tt,ad as nt}from"./entry.7de5b8ce.js";import{o as ce}from"./ready.ceb3753a.js";import{_ as lt}from"./Languages.4cc3a478.js";const ot={class:"text-h5"},at=f("a",{target:"_blank",href:"https://platform.openai.com/account/api-keys"},"https://platform.openai.com/account/api-keys",-1),st={class:"mt-5 d-flex align-center"},it={key:0},dt={key:1},rt={__name:"ApiKeyDialog",setup(k){const c=C(!1),o=Se();C("");const w=C(!1),u=C(null),p=async()=>{Ne(o.value),w.value=!1};return(a,y)=>{const $=l("v-list-item"),I=l("v-card-title"),z=l("v-divider"),U=l("v-text-field"),_=l("v-btn"),D=l("v-card-text"),S=l("v-alert"),b=l("v-spacer"),N=l("v-card-actions"),T=l("v-card"),B=l("v-dialog");return M(),K(B,{modelValue:n(c),"onUpdate:modelValue":y[3]||(y[3]=A=>R(c)?c.value=A:null),persistent:""},{activator:t(({props:A})=>[e($,j({rounded:"xl"},A,{"prepend-icon":"vpn_key",color:"primary"}),{default:t(()=>[m(x(a.$t("setApiKey")),1)]),_:2},1040)]),default:t(()=>[e(T,null,{default:t(()=>[e(I,null,{default:t(()=>[f("span",ot,x(a.$t("openAIApiKey")),1)]),_:1}),e(z),e(D,null,{default:t(()=>[f("div",null,[m(x(a.$t("getAKey"))+": ",1),at]),f("div",st,[e(U,{modelValue:n(o),"onUpdate:modelValue":y[0]||(y[0]=A=>R(o)?o.value=A:null),label:"Api Key","hide-details":"",clearable:"",disabled:!n(w)},null,8,["modelValue","disabled"]),n(w)?(M(),L("div",it,[e(_,{class:"ml-3",icon:"done",onClick:p})])):(M(),L("div",dt,[e(_,{class:"ml-3",icon:"edit",onClick:y[1]||(y[1]=A=>w.value=!0)})]))])]),_:1}),e(z),e(N,null,{default:t(()=>[n(u)?(M(),K(S,{key:0,density:"compact",type:"warning",text:n(u)},null,8,["text"])):Z("",!0),e(b),e(_,{color:"primary",onClick:y[2]||(y[2]=A=>c.value=!1)},{default:t(()=>[m(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},se=new WeakMap;function ut(k){if(se.has(k))return se.get(k);const c={...k};return c.render?c.render=(o,...w)=>{if(o.mounted$){const u=k.render(o,...w);return u.children===null||typeof u.children=="string"?f(u.type,u.props,u.children,u.patchFlag,u.dynamicProps,u.shapeFlag):Q(u)}else return Q("div",j(o.$attrs??o._.attrs,{key:"placeholder-key"}))}:c.template&&(c.template=`
      <template v-if="mounted$">${k.template}</template>
      <template v-else><div></div></template>
    `),c.setup=(o,w)=>{var p;const u=C(!1);return Ee(()=>{u.value=!0}),Promise.resolve(((p=k.setup)==null?void 0:p.call(k,o,w))||{}).then(a=>typeof a!="function"?{...a,mounted$:u}:(...y)=>{if(u.value){const $=a(...y);return $.children===null||typeof $.children=="string"?f($.type,$.props,$.children,$.patchFlag,$.dynamicProps,$.shapeFlag):Q($)}else return Q("div",j(w.attrs,{key:"placeholder-key"}))})},se.set(k,c),c}const ct={class:"d-flex justify-space-between align-center"},pt={class:"d-flex justify-space-between align-center"},_t={class:"text-caption"},mt={class:"d-flex justify-space-between align-center"},vt={class:"d-flex justify-space-between align-center"},ft={class:"d-flex justify-space-between align-center"},yt={__name:"ModelParameters.client",setup(k){const c=C(!1),o=Ke(),w=["gpt-3.5-turbo","gpt-4"],u=C(re[o.value.name]);return ce(()=>{o.value=je(),Oe(o,(p,a)=>{u.value=re[p.name],Fe(p)},{deep:!0})}),(p,a)=>{const y=l("v-list-item"),$=l("v-toolbar-title"),I=l("v-spacer"),z=l("v-btn"),U=l("v-toolbar"),_=l("v-select"),D=l("v-list-subheader"),S=l("v-text-field"),b=l("v-col"),N=l("v-slider"),T=l("v-row"),B=l("v-card-text"),A=l("v-card"),ee=l("v-dialog");return M(),K(ee,{modelValue:n(c),"onUpdate:modelValue":a[12]||(a[12]=i=>R(c)?c.value=i:null),persistent:""},{activator:t(({props:i})=>[e(y,j(i,{rounded:"xl","prepend-icon":"tune",title:p.$t("modelParameters")}),null,16,["title"])]),default:t(()=>[e(A,null,{default:t(()=>[e(U,{density:"compact"},{default:t(()=>[e($,null,{default:t(()=>[m(x(p.$t("modelParameters")),1)]),_:1}),e(I),e(z,{icon:"close",onClick:a[0]||(a[0]=i=>c.value=!1)})]),_:1}),e(B,null,{default:t(()=>[e(_,{modelValue:n(o).name,"onUpdate:modelValue":a[1]||(a[1]=i=>n(o).name=i),label:p.$t("model"),items:w,variant:"underlined"},null,8,["modelValue","label"]),e(T,{"no-gutters":""},{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[f("div",ct,[e(D,null,{default:t(()=>[m(x(p.$t("temperature")),1)]),_:1}),e(S,{modelValue:n(o).temperature,"onUpdate:modelValue":a[2]||(a[2]=i=>n(o).temperature=i),modelModifiers:{number:!0},"hide-details":"","single-line":"",density:"compact",type:"number",max:"1",step:"0.01",style:{width:"100px"},class:"flex-grow-0"},null,8,["modelValue"])])]),_:1}),e(b,{cols:"12"},{default:t(()=>[e(N,{modelValue:n(o).temperature,"onUpdate:modelValue":a[3]||(a[3]=i=>n(o).temperature=i),max:1,step:.01,"hide-details":""},null,8,["modelValue","step"])]),_:1})]),_:1}),e(T,{"no-gutters":""},{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[f("div",pt,[e(D,null,{default:t(()=>[m(x(p.$t("maxTokens")),1)]),_:1}),e(S,{modelValue:n(o).max_tokens,"onUpdate:modelValue":a[4]||(a[4]=i=>n(o).max_tokens=i),modelModifiers:{number:!0},"hide-details":"","single-line":"",density:"compact",type:"number",max:n(u).total_tokens,step:"1",style:{width:"100px"},class:"flex-grow-0"},null,8,["modelValue","max"])]),f("div",_t,[m(x(p.$t("maxTokenTips1"))+" ",1),f("b",null,x(n(u).total_tokens),1),m(" "+x(p.$t("maxTokenTips2")),1)])]),_:1}),e(b,{cols:"12"},{default:t(()=>[e(N,{modelValue:n(o).max_tokens,"onUpdate:modelValue":a[5]||(a[5]=i=>n(o).max_tokens=i),max:n(u).total_tokens,step:1,"hide-details":""},null,8,["modelValue","max"])]),_:1})]),_:1}),e(T,{"no-gutters":""},{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[f("div",mt,[e(D,null,{default:t(()=>[m(x(p.$t("topP")),1)]),_:1}),e(S,{modelValue:n(o).top_p,"onUpdate:modelValue":a[6]||(a[6]=i=>n(o).top_p=i),modelModifiers:{number:!0},"hide-details":"","single-line":"",density:"compact",type:"number",max:"1",step:"0.01",style:{width:"100px"},class:"flex-grow-0"},null,8,["modelValue"])])]),_:1}),e(b,{cols:"12"},{default:t(()=>[e(N,{modelValue:n(o).top_p,"onUpdate:modelValue":a[7]||(a[7]=i=>n(o).top_p=i),max:1,step:.01,"hide-details":""},null,8,["modelValue","step"])]),_:1})]),_:1}),e(T,{"no-gutters":""},{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[f("div",vt,[e(D,null,{default:t(()=>[m(x(p.$t("frequencyPenalty")),1)]),_:1}),e(S,{modelValue:n(o).frequency_penalty,"onUpdate:modelValue":a[8]||(a[8]=i=>n(o).frequency_penalty=i),modelModifiers:{number:!0},"hide-details":"","single-line":"",density:"compact",type:"number",max:"2",step:"0.01",style:{width:"100px"},class:"flex-grow-0"},null,8,["modelValue"])])]),_:1}),e(b,{cols:"12"},{default:t(()=>[e(N,{modelValue:n(o).frequency_penalty,"onUpdate:modelValue":a[9]||(a[9]=i=>n(o).frequency_penalty=i),max:2,step:.01,"hide-details":""},null,8,["modelValue","step"])]),_:1})]),_:1}),e(T,{"no-gutters":""},{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[f("div",ft,[e(D,null,{default:t(()=>[m(x(p.$t("presencePenalty")),1)]),_:1}),e(S,{modelValue:n(o).presence_penalty,"onUpdate:modelValue":a[10]||(a[10]=i=>n(o).presence_penalty=i),modelModifiers:{number:!0},"hide-details":"","single-line":"",density:"compact",type:"number",max:"2",step:"0.01",style:{width:"100px"},class:"flex-grow-0"},null,8,["modelValue"])])]),_:1}),e(b,{cols:"12"},{default:t(()=>[e(N,{modelValue:n(o).presence_penalty,"onUpdate:modelValue":a[11]||(a[11]=i=>n(o).presence_penalty=i),max:2,step:.01,"hide-details":""},null,8,["modelValue","step"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},gt=()=>ze("color-mode").value;const xt=ut(yt),kt={class:"px-2"},wt={class:"px-1"},$t={__name:"NavigationDrawer",setup(k){const c=Be(),{$i18n:o,$settings:w}=qe(),u=gt(),{mdAndUp:p}=Le(),a=Re(()=>p.value),y=Ie(),$=C([{title:o.t("lightMode"),value:"light"},{title:o.t("darkMode"),value:"dark"},{title:o.t("followSystem"),value:"system"}]),I=s=>{u.preference=s},z=()=>{window.open("https://github.com/WongSaang/chatgpt-ui/issues","_blank")};Je();const U=We(),_=C(!1),D=C(!1),S=s=>{_.value=U.value[s]},b=async s=>{_.value.updating=!0;const{data:d,error:v}=await H(`/api/chat/conversations/${_.value.id}/`,{method:"PUT",body:JSON.stringify({topic:_.value.topic})});v.value||(_.value.updating=!1,U.value[s]=_.value),U.value[s].updating=!1,_.value=!1},N=async s=>{D.value=s;const{data:d,error:v}=await H(`/api/chat/conversations/${U.value[s].id}/`,{method:"DELETE"});if(D.value=null,!v.value){const g=U.value[s];U.value.splice(s,1),c.params.id&&parseInt(c.params.id)===g.id&&await Ge("/")}},T=C(!1),B=C(""),A=s=>{B.value=s,T.value=!0},ee=async s=>{const{data:d,error:v}=await H(`/api/chat/messages/?conversationId=${s}`);return v.value?v.value:d.value},i=async s=>{let d=U.value[s],v={};v.conversation_topic=d.topic,v.messages=[];let g=await ee(d.id);for(let O of g){let F={};F.role=O.is_bot?"assistant":"user",F.content=O.message,v.messages.push(F)}let h=JSON.stringify(v),V=`${d.topic}_${new Date}`.replace(/[\/\\:*?"<>]/g,"_");const P=document.createElement("a");P.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(h)),P.setAttribute("download",V),P.style.display="none",document.body.appendChild(P),P.click(),document.body.removeChild(P)},pe=async()=>{document.getElementById("import_conversation_input").click()},_e=async()=>{let d=document.getElementById("import_conversation_input").files,v=[];const g=new FileReader;for(let V of d){let P=await new Promise((F,W)=>{g.readAsText(V),g.onload=()=>F(g.result),g.onerror=ie=>W(error)}),O=JSON.parse(P);v.push(O)}let h=[];try{const{data:V,error:P}=await H("/api/upload_conversations/",{method:"POST",headers:{accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({imports:v})});P.value?(console.log(err),A(err.message)):(h=V.value,le())}catch(V){console.log(V.message),A(V.message)}},me=async()=>{te.value=!0;const{data:s,error:d}=await H("/api/chat/conversations/delete_all",{method:"DELETE"});d.value||(le(),J.value=!1),te.value=!1},J=C(!1),te=C(!1),ne=C(!1),le=async()=>{ne.value=!0,U.value=await Ye(),ne.value=!1},ve=async()=>{const{data:s,error:d}=await Ze("/api/account/logout/",{method:"POST"},"$6Ayz9qdghn");d.value||await et()};ce(async()=>{le()});const oe=He();return(s,d)=>{const v=l("v-icon"),g=l("v-btn"),h=l("v-list-item"),V=l("v-list"),P=l("v-menu"),O=l("v-divider"),F=l("v-progress-circular"),W=l("v-list-item-title"),ie=l("v-text-field"),fe=l("v-hover"),ye=l("v-expansion-panel-title"),ge=l("v-card-title"),xe=l("v-card-text"),ke=l("v-spacer"),we=l("v-card-actions"),$e=l("v-card"),be=l("v-dialog"),he=rt,Ve=xt,Ce=lt,Me=l("v-expansion-panel-text"),Ue=l("v-expansion-panel"),Te=l("v-expansion-panels"),Pe=l("v-navigation-drawer"),Ae=l("v-snackbar");return M(),L(Y,null,[e(Pe,{modelValue:n(oe),"onUpdate:modelValue":d[4]||(d[4]=r=>R(oe)?oe.value=r:null),permanent:n(a),width:"300"},Qe({append:t(()=>[e(O),e(Te,{style:{"flex-direction":"column"}},{default:t(()=>[e(Ue,{rounded:"rounded-pill"},{default:t(()=>[e(ye,{"expand-icon":"add","collapse-icon":"close"},{default:t(()=>[e(v,{icon:"settings",class:"mr-4"}),m(" "+x(s.$t("settingDraw")),1)]),_:1}),e(Me,null,{default:t(()=>[f("div",wt,[e(V,{density:"compact"},{default:t(()=>[e(be,{modelValue:n(J),"onUpdate:modelValue":d[2]||(d[2]=r=>R(J)?J.value=r:null),persistent:""},{activator:t(({props:r})=>[e(h,j(r,{rounded:"xl","prepend-icon":"delete_forever",title:s.$t("clearConversations")}),null,16,["title"])]),default:t(()=>[e($e,null,{default:t(()=>[e(ge,{class:"text-h5"},{default:t(()=>[m(" Are you sure you want to delete all conversations? ")]),_:1}),e(xe,null,{default:t(()=>[m("This will be a permanent deletion and cannot be retrieved once deleted. Please proceed with caution.")]),_:1}),e(we,null,{default:t(()=>[e(ke),e(g,{color:"green-darken-1",variant:"text",onClick:d[1]||(d[1]=r=>J.value=!1),class:"text-none"},{default:t(()=>[m(" Cancel deletion ")]),_:1}),e(g,{color:"green-darken-1",variant:"text",onClick:me,class:"text-none",loading:n(te)},{default:t(()=>[m(" Confirm deletion ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(h,{rounded:"xl","prepend-icon":"input",title:s.$t("importConversation"),onClick:d[3]||(d[3]=r=>pe())},null,8,["title"]),n(w).open_api_key_setting==="True"?(M(),K(he,{key:0})):Z("",!0),e(Ve),e(P,null,{activator:t(({props:r})=>[e(h,j(r,{rounded:"xl",title:s.$t("themeMode")}),{prepend:t(()=>[X(e(v,{icon:"light_mode"},null,512),[[G,s.$colorMode.value==="light"]]),X(e(v,{icon:"dark_mode"},null,512),[[G,s.$colorMode.value!=="light"]])]),_:2},1040,["title"])]),default:t(()=>[e(V,{"bg-color":"white"},{default:t(()=>[(M(!0),L(Y,null,ue(n($),(r,E)=>(M(),K(h,{key:E,onClick:q=>I(r.value)},{default:t(()=>[e(W,null,{default:t(()=>[m(x(r.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),e(Ce),e(h,{rounded:"xl","prepend-icon":"help_outline",title:s.$t("feedback"),onClick:z},null,8,["title"])]),_:1})])]),_:1})]),_:1})]),_:1})]),default:t(()=>[f("div",kt,[e(V,null,{default:t(()=>[X(e(h,null,{default:t(()=>[e(W,{class:"d-flex justify-center"},{default:t(()=>[e(F,{indeterminate:""})]),_:1})]),_:1},512),[[G,n(ne)]])]),_:1}),e(V,null,{default:t(()=>[(M(!0),L(Y,null,ue(n(U),(r,E)=>(M(),L(Y,{key:r.id},[n(_)&&n(_).id===r.id?(M(),K(h,{key:0,"active-color":"primary",rounded:"xl"},{default:t(()=>[e(ie,{modelValue:n(_).topic,"onUpdate:modelValue":d[0]||(d[0]=q=>n(_).topic=q),loading:n(_).updating,variant:"underlined","append-icon":"done","hide-details":"",density:"compact",autofocus:"",onKeyup:Xe(q=>b(E),["enter"]),"onClick:append":q=>b(E)},null,8,["modelValue","loading","onKeyup","onClick:append"])]),_:2},1024)):Z("",!0),!n(_)||n(_).id!==r.id?(M(),K(fe,{key:1},{default:t(({isHovering:q,props:De})=>[e(h,j({rounded:"xl","active-color":"primary",to:r.id?`/${r.id}`:"/"},De),{append:t(()=>[X(f("div",null,[e(g,{icon:"edit",size:"small",variant:"text",onClick:ae(de=>S(E),["prevent"])},null,8,["onClick"]),e(g,{icon:"delete",size:"small",variant:"text",loading:n(D)===E,onClick:ae(de=>N(E),["prevent"])},null,8,["loading","onClick"]),e(g,{icon:"download",size:"small",variant:"text",onClick:ae(de=>i(E),["prevent"])},null,8,["onClick"])],512),[[G,q&&r.id]])]),default:t(()=>[e(W,null,{default:t(()=>[m(x(r.topic&&r.topic!==""?r.topic:s.$t("defaultConversationTitle")),1)]),_:2},1024)]),_:2},1040,["to"])]),_:2},1024)):Z("",!0)],64))),128))]),_:1})])]),_:2},[n(y)?{name:"prepend",fn:t(()=>[e(V,null,{default:t(()=>[e(h,{title:n(y).username,subtitle:n(y).email},{prepend:t(()=>[e(v,{icon:"face",size:"x-large"})]),append:t(()=>[e(P,null,{activator:t(({props:r})=>[e(g,j(r,{size:"small",variant:"text",icon:"expand_more"}),null,16)]),default:t(()=>[e(V,null,{default:t(()=>[e(h,{title:s.$t("resetPassword"),to:"/account/resetPassword"},null,8,["title"]),e(h,{title:s.$t("signOut"),onClick:ve},null,8,["title"])]),_:1})]),_:1})]),_:1},8,["title","subtitle"])]),_:1}),e(O)]),key:"0"}:void 0]),1032,["modelValue","permanent"]),e(Ae,{modelValue:n(T),"onUpdate:modelValue":d[6]||(d[6]=r=>R(T)?T.value=r:null),"multi-line":"",location:"top"},{actions:t(()=>[e(g,{color:"red",variant:"text",onClick:d[5]||(d[5]=r=>T.value=!1),density:"compact",size:"default"},{default:t(()=>[m(" Close ")]),_:1})]),default:t(()=>[m(x(n(B))+" ",1)]),_:1},8,["modelValue"]),f("input",{type:"file",id:"import_conversation_input",style:{display:"none"},accept:"text/plain, text/json",multiple:"",onChange:_e},null,32)],64)}}},bt={};function ht(k,c){const o=$t,w=l("v-app");return M(),K(w,{theme:k.$colorMode.value},{default:t(()=>[e(o),nt(k.$slots,"default")]),_:3},8,["theme"])}const Ut=tt(bt,[["render",ht]]);export{Ut as default};
