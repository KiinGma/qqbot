import{x as T,r as v,c as B,w as d,f as u,o as V,h as o,i as $,t as g,u as s,j as E,l as F,z as P,k as U,m as h,A as q}from"./entry.7de5b8ce.js";const j={class:"text-center text-h4"},z={key:0,class:"text-red"},A={class:"mt-5 d-flex justify-space-between"},R={__name:"signup",setup(D){const{$i18n:l}=T(),n=v({username:"",email:"",password1:"",password2:"",code:""}),i=v({username:"",email:"",password1:"",password2:"",code:""}),c=v({username:[e=>!!e||l.t("Please enter your username"),e=>e.length>=4||l.t("Username must be at least 4 characters")],email:[e=>!!e||l.t("Please enter your e-mail address"),e=>/.+@.+\..+/.test(e)||l.t("E-mail address must be valid")],password1:[e=>!!e||l.t("Please enter your password"),e=>e.length>=8||l.t("Password must be at least 8 characters")],password2:[e=>!!e||l.t("Please confirm your password"),e=>e.length>=8||l.t("Password must be at least 8 characters"),e=>e===n.value.password1||l.t("Confirm password must match password")],code:[e=>!!e||l.t("Please enter your code")]}),w=v(!1),m=v(null),_=v(null),k=async()=>{m.value=null;const{valid:e}=await _.value.validate();if(e){w.value=!0;const{data:a,error:t}=await h("/api/account/registration/",{method:"POST",body:JSON.stringify(n.value)},"$QNyKqElYPR");if(console.log(t.value),t.value)if(t.value.status===400){for(const p in n.value)t.value.data[p]&&(i.value[p]=l.t(t.value.data[p][0]));t.value.data.non_field_errors&&(m.value=l.t(t.value.data.non_field_errors[0]))}else t.value.data.detail?m.value=l.t(t.value.data.detail):m.value="Something went wrong. Please try again.";else q(a.value.user),P("/account/onboarding?email_verification_required="+a.value.email_verification_required);w.value=!1}},f=e=>{i.value[e]=""};return(e,a)=>{const t=u("v-text-field"),p=u("v-form"),b=u("v-btn"),C=u("v-card-text"),y=u("v-card"),N=u("v-col"),x=u("v-row"),S=u("v-container");return V(),B(y,{style:{height:"100vh"}},{default:d(()=>[o(S,null,{default:d(()=>[o(x,null,{default:d(()=>[o(N,{sm:"9","offset-sm":"1",md:"6","offset-md":"3"},{default:d(()=>[o(y,{class:"mt-15",elevation:"0"},{default:d(()=>[$("div",j,g(e.$t("Create your account")),1),o(C,null,{default:d(()=>[o(p,{ref_key:"signUpForm",ref:_,class:"mt-5"},{default:d(()=>[o(t,{modelValue:s(n).username,"onUpdate:modelValue":[a[0]||(a[0]=r=>s(n).username=r),a[1]||(a[1]=r=>f("username"))],rules:s(c).username,"error-messages":s(i).username,label:e.$t("username"),variant:"underlined",clearable:""},null,8,["modelValue","rules","error-messages","label"]),o(t,{modelValue:s(n).email,"onUpdate:modelValue":[a[2]||(a[2]=r=>s(n).email=r),a[3]||(a[3]=r=>f("email"))],rules:s(c).email,"error-messages":s(i).email,label:e.$t("email"),variant:"underlined",clearable:""},null,8,["modelValue","rules","error-messages","label"]),o(t,{modelValue:s(n).password1,"onUpdate:modelValue":[a[4]||(a[4]=r=>s(n).password1=r),a[5]||(a[5]=r=>f("password1"))],rules:s(c).password1,"error-messages":s(i).password1,label:e.$t("password"),variant:"underlined",clearable:""},null,8,["modelValue","rules","error-messages","label"]),o(t,{modelValue:s(n).password2,"onUpdate:modelValue":[a[6]||(a[6]=r=>s(n).password2=r),a[7]||(a[7]=r=>f("password2"))],rules:s(c).password2,"error-messages":s(i).password2,label:e.$t("confirmPassword"),variant:"underlined",clearable:""},null,8,["modelValue","rules","error-messages","label"])]),_:1},512),s(m)?(V(),E("div",z,g(s(m)),1)):F("",!0),$("div",A,[o(b,{onClick:a[8]||(a[8]=r=>("navigateTo"in e?e.navigateTo:s(P))("/account/signin")),variant:"text",color:"primary"},{default:d(()=>[U(g(e.$t("Sign in instead")),1)]),_:1}),o(b,{size:"large",color:"primary",loading:s(w),onClick:k},{default:d(()=>[U(g(e.$t("signUp")),1)]),_:1},8,["loading"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{R as default};
